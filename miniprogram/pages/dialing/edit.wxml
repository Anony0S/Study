<!-- pages/dialing/edit.wxml -->
<wxs module="utils" src="../../utils/index.wxs"></wxs>
<view class="header-card">
  <view class="header-card-item" wx:for="{{headerData}}" wx:key="index" style="color: {{item.color}};">
    <view class="header-card-num">{{item.number}}</view>
    <view class="header-card-label">{{item.label}}</view>
  </view>
</view>
<view>
  <view class="dialing-card" wx:for="{{netcards}}" wx:key="index">
    <view class="card-title">
      {{'网卡: '+item.name + ' | 速率:'+item.speed+'M '+ (item.ip ? '| '+item.ip:'')+'| 线路数:'+item.dialingInfo.length+'条'}}
    </view>
    <view class="dialing-card-table">
      <view class="dialing-card-tr">
        <view class="dialing-card-th">序号</view>
        <view class="dialing-card-th">vlan_id</view>
        <view class="dialing-card-th">{{isIpType ? "IP":"账号"}}</view>
        <view class="dialing-card-th">{{isIpType ? "网关":"密码"}}</view>
        <view class="dialing-card-th">
          <view>IPv6</view>
          <t-switch custom-value="{{[1,0]}}" size="small" value="{{allIPv6[index]}}" slot="note" data-index="{{index}}" bind:change="changeIpv6" />
        </view>
        <view class="dialing-card-th">
          <t-icon name="delete" size="24" bind:click="removeAllDialingInfo" data-index="{{index}}" />
        </view>
      </view>
      <view class="dialing-card-tr" wx:for="{{item.dialingInfo}}" wx:for-index="i" wx:key="index">
        <view class="dialing-card-td">{{item.number || 0}}</view>
        <view class="dialing-card-td">{{item.vlanId}}</view>
        <view class="dialing-card-td">{{isIpType ? item.ip: item.account}}</view>
        <view class="dialing-card-td">{{isIpType ? item.gateway : item.password}}</view>
        <view class="dialing-card-td">
          <t-switch custom-value="{{[1,0]}}" value="{{item.enableV6}}" size="small" slot="note" data-index="{{index}}" data-i="{{i}}" bind:change="changeItemIpv6" />
        </view>
        <view class="dialing-card-td">
          <t-icon name="delete" size="20" bind:click="removeDialingInfo" data-index="{{index}}" data-i="{{i}}" />
        </view>
      </view>
      <view class="no-data" wx:if="{{!item.dialingInfo || item.dialingInfo.length === 0}}">暂无数据</view>
    </view>
    <view class="add-btns-box">
      <t-button block size="small" theme="primary" data-index="{{index}}" bindtap="toAdd">批量填写</t-button>
    </view>
  </view>
</view>
<view class="btn-box">
  <t-button block theme="primary" bindtap="toDialing">拨号</t-button>
  <t-button block bindtap="asyncInfo" loading="{{isAsyncing}}">同步网卡信息</t-button>
</view>